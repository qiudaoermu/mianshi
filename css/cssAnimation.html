<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      .containerWrapper {
        height: 40px;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div class="roll" id="roll">
      <div class="containerWrapper">
        <ul>
          <li>第一个结构</li>
          <li>第二个结构</li>
          <li>第三个结构</li>
          <li>第四个结构</li>
          <li>第五个结构</li>
          <li>第六个结构</li>
          <li>第七个结构</li>
          <li>第八个结构</li>
          <li>第一个结构</li>
          <li>第二个结构</li>
        </ul>
      </div>

    </div>
  </body>
  <script type="text/javascript" src="../jQuery/jquery.js"></script>
  <script type="text/javascript">
    function addKeyFrame() {
      var ulObj = $("#roll ul"), //获取ul对象
        length = $("#roll li").length, //获取li数组长度
        per = 100 / (length / 2 * 2); //计算中间间隔百分比
      // 拼接字符串
      var keyframes = `\
    @keyframes ani{`;
      for (var i = 0; i <= length; i++) {
        keyframes += `${i * per}%{
                        margin-top: ${i % 2 == 0
          ? -i * 20
          : -(i - 1) * 20}px;
                    }`;
      }
      keyframes += '}';

      $("<style>").attr("type", "text/css").html(keyframes).appendTo($("head")); //创建style标签把关键帧插入到头部
      ulObj.css("animation", "ani 5s linear infinite"); //给ul添加css3动画
    }
    addKeyFrame();
  </script>
</html>