<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

</body>
<script type="text/javascript">
//Promise管理异步流程
function time(){
	return new Promise(function(resolve,reject){
		setTimeout(function(){
				resolve(3)
		},1000)
		//console.log(4)
	})
}

time().then(function(value){
	console.log(value)
	console.log(4)
})
//promise源码解析
function Cromise(fn){
	var arr = []
	var t = null;
	var self = this
	self.then = function(callback){
			arr.push(callback)
	}
	
	function resolve(value){
		t = value
		
		arr.forEach(function(callback,value){
				callback(t)
		})
		
	}
	fn&&fn(resolve)
}


function ctime(){
	return new Cromise(function(resolve){
			
			setTimeout(function(){
				resolve("baidu")
			},1000)
})
}

ctime().then(function(value){
	console.log(value)
})


function cc(fn){
	function resolve(value){
			console.log(value)
	}

	function fn(callback){
			
	}

	fn(resolve)
}




function doit(fn){
	function resolve(){
		console.log("resolve")
	}

    fn&&fn(resolve)
}

doit(function(resolve){
	resolve()
})

cc(function(resolve){
		resolve(3)
})






//es6私有变量

class My{
	constructor(name){
		this.snaf = name
	}
	foo(baz){
		bar.call(this,baz)
	}
}
function bar(baz){
	return this.snaf = baz
}
var m = new My('cc')
console.log(m.snaf)//ff
m.foo('dd')
console.log(m.snaf) //dd
</script>
</html>
